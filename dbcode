create database FundsFlow ;

use FundsFlow;


CREATE TABLE Business (
  id INT PRIMARY KEY AUTO_INCREMENT,
  name VARCHAR(255),
  email VARCHAR(255),
  password VARCHAR(255),
  tax_card_number VARCHAR(255),
  current_address VARCHAR(255),
  description TEXT,
  reviews VARCHAR(255),
  advertisements VARCHAR(255),
  products_or_services VARCHAR(255),
  phone VARCHAR(255),
  nationality VARCHAR(255),
  active BOOLEAN,
  total_returns DECIMAL(20,2),
  total_funds_raised DECIMAL(20,2)
);

CREATE TABLE Investment_Opportunity (
  OpportunityID INT PRIMARY KEY AUTO_INCREMENT,
  Description TEXT,
  Amount_Needed DECIMAL(18, 2),
  Returns_Percentage VARCHAR(255),
  Revenues VARCHAR(255),
  Net_Profits  VARCHAR(255),
  Profit_Margins VARCHAR(255),
  Return_on_Investment VARCHAR(255),
  Cash_Flow DECIMAL(18, 2) ,
  Potential_Risks VARCHAR(255),
  Future_Growth VARCHAR(255),
  Products_Or_Services VARCHAR(255),
  Remaining_Amount DECIMAL(18, 2),
  Company_Valuation VARCHAR(255),
  Business_Name VARCHAR(255),
  Business_Field VARCHAR(255),
  Start_Date DATE,
  End_Date DATE,
  Admin_ID INT
);

CREATE TABLE Transaction (
  Transaction_ID INT PRIMARY KEY AUTO_INCREMENT,
  Amount DECIMAL(18, 2),
  Transaction_Number VARCHAR(255),
  Business_ID INT,
  Investor_ID INT,
  Opportunity_ID INT,
  Bank_ID INT
);

CREATE TABLE Bank (
  Bank_ID INT PRIMARY KEY AUTO_INCREMENT,
  Name VARCHAR(255),
  Address VARCHAR(255),
  Transaction_Number VARCHAR(255)
);

CREATE TABLE Investor (
  Investor_ID INT PRIMARY KEY AUTO_INCREMENT,
  Name VARCHAR(255),
  Email VARCHAR(255),
  Password VARCHAR(255),
  Description TEXT,
  Gender VARCHAR(255),
  Phone VARCHAR(255),
  Nationality VARCHAR(255),
  SSN VARCHAR(255),
  Age INT,
--   Portfolio JSON,
  Maximum_Drawdown VARCHAR(255),
  Total_Invested DECIMAL(20, 2) ,
  Active BOOLEAN,
--   Favorite_Markets JSON
);

CREATE TABLE Platform_Admin (
  Admin_ID INT PRIMARY KEY AUTO_INCREMENT,
  Name VARCHAR(255),
  Email VARCHAR(255),
  Password VARCHAR(255),
  Commission DECIMAL(20 , 5),
  Business_ID INT,
  Investor_ID INT,
  Bank_ID INT
);

CREATE TABLE Invest (
  Opportunity_ID INT,
  Investor_ID INT,
  Amount DECIMAL(20 , 5),
  Investment_Date DATE
);

-- CREATE TABLE Authentication (
--   OpportunityID INT,
--   Admin_ID INT,
--   Approved BOOLEAN
-- );

ALTER TABLE Investment_Opportunity ADD FOREIGN KEY (Admin_ID) REFERENCES Platform_Admin (Admin_ID);

ALTER TABLE Transaction ADD FOREIGN KEY (Business_ID) REFERENCES Business (Business_ID);

ALTER TABLE Transaction ADD FOREIGN KEY (Investor_ID) REFERENCES Investor (Investor_ID);

ALTER TABLE Transaction ADD FOREIGN KEY (Opportunity_ID) REFERENCES Investment_Opportunity (OpportunityID);

ALTER TABLE Transaction ADD FOREIGN KEY (Bank_ID) REFERENCES Bank (Bank_ID);

ALTER TABLE Platform_Admin ADD FOREIGN KEY (Business_ID) REFERENCES Business (Business_ID);

ALTER TABLE Platform_Admin ADD FOREIGN KEY (Investor_ID) REFERENCES Investor (Investor_ID);

ALTER TABLE Platform_Admin ADD FOREIGN KEY (Bank_ID) REFERENCES Bank (Bank_ID);

ALTER TABLE Invest ADD FOREIGN KEY (OpportunityID) REFERENCES Investment_Opportunity (OpportunityID);

ALTER TABLE Invest ADD FOREIGN KEY (Investor_ID) REFERENCES Investor (Investor_ID);

ALTER TABLE Authentication ADD FOREIGN KEY (OpportunityID) REFERENCES Investment_Opportunity (OpportunityID);

ALTER TABLE Authentication ADD FOREIGN KEY (Admin_ID) REFERENCES Platform_Admin (Admin_ID);

